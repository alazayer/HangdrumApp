############# BUTTON TEMPLATES ###############
<NoteButton>:
    size_hint: [None, None]
    size: [160, 160]
    background_normal: 'Imgs/blueButtonPressed.png'
    background_down: 'Imgs/redButtonPressed.png'


<PlayButton>:
    size_hint: [None, None]
    size: [200, 200]
    background_normal: 'Imgs/playButtonNormal.png'
    background_down: 'Imgs/playButtonPressed.png'

############# SCREEN MANAGER LAYOUT ###############
<MainLayout>
    id: mainlayout

    Manager:
        id: screen_manager

        # Links between .py file and .kv file
        screen_one: screen_one
        screen_two: screen_two

        ScreenOne:
            id: screen_one
            name: 'screen1'
            manager: screen_manager

        ScreenTwo:
            id: screen_two
            name: 'screen2'
            manager: screen_manager


############# SCREEN 1 LAYOUT ############
<ScreenOne>
    filename: filename
    mainScale: mainScale
    secondScale: secondScale
    secondScaleCheckBox: secondScaleCheckBox
    stepBasedToggle: stepBasedToggle
    scaleBasedToggle: scaleBasedToggle
    tempo: tempo
    reverseScaleCheckBox: reverseScaleCheckBox

    canvas:
        Color:
            rgb: [0, 0, 0]
        Rectangle:
            pos: 0,0
            size: root.width, root.height

    GridLayout:
        rows: 2
        size: root.width - 400, root.height - 400
        size_hint: [None, None]
        pos: 200, 200

        canvas:
            Color:
                rgb: [0, 0, 0]
            Rectangle:
                pos: self.pos
                size: self.size

        GridLayout:
            rows: 4
            cols: 2
            # size: root.width - 200, root.height - 200
            # size_hint: [None, None]

            canvas:
                Color:
                    rgb: [.1, .1, .384]
                Rectangle:
                    pos: self.pos
                    size: self.size

            Label:
                text: "File Path:"

            TextInput:
                id: filename
                text: 'Tabs/LandOfColeHDtabs.xlsx'

            Label:
                text: "Desired Tempo:"

            TextInput:
                id: tempo
                text: '120'

            Label:
                text: "Main Scale:"
                halign: 'center'

            TextInput:
                id: mainScale
                text: 'D3,A3,Bb3,C4,D4,E4,F4,G4,A4'

            GridLayout:
                cols: 3

                canvas.before:
                    Color:
                        rgb: [0.3, 0.3, .6]
                    Rectangle:
                        pos: self.pos
                        size: self.size

                CheckBox:
                    id: secondScaleCheckBox
                    size_hint_x: 0.4

                Label:
                    text: 'Convert to 2nd Scale'
                    halign: 'left'

                CheckBox:
                    id: reverseScaleCheckBox
                    size_hint_x: 0.4

            TextInput:
                id: secondScale
                text: 'B2,C4,C#4,D4,E4,F#4,G4,B4,C#5'
                background_disabled_normal: ""
                disabled: not secondScaleCheckBox.active

        GridLayout:
            id: loadingBar
            cols: 2
            rows: 1
            size: root.width - 400, root.height - 1000
            pos: 200, 200
            size_hint: [None, None]


            GridLayout:
                rows:2

                canvas:
                    Color:
                        rgb: [0.3, 0.3, .6, 1]
                    Rectangle:
                        pos: self.pos
                        size: self.size

                ToggleButton:
                    text: 'Based on Steps'
                    group: 'scaleConversion'
                    id: stepBasedToggle
                    background_color: 0.3, 0.3, .6, 1
                    disabled: not secondScaleCheckBox.active
                    state: 'down'

                ToggleButton:
                    background_color: 0.3, 0.3, .6, 1
                    text: 'Based on Scale'
                    group: 'scaleConversion'
                    id: scaleBasedToggle
                    disabled: not secondScaleCheckBox.active

            Button:
                text: "Load"
                background_color: 0.2, 0.8, 0.4, 1
                # size: 500, 200
                # size_hint: [None, None]
                # pos_hint: {"x":0.6, "y":0.5}
                on_release: root.manager.current = 'screen2'

############# SCREEN 2 LAYOUT ############
<ScreenTwo>

    canvas:
        Color:
            rgb: [.5, .5, .384]
        Rectangle:
            source: 'Imgs/Hangdrum_Pic.png'
            pos: 250,200
            size: root.width-500, root.height-400

    # FloatLayout where notes will be stored
    FloatLayout:
        id: noteButtons

        NoteButton:
            id: slap
            text: 'Slap'
            color: 0,0,0,1
            size: [150, 150]
            pos_hint: {"x":0.33, "y":0.33}
            background_normal: 'Imgs/slapButton.png'
            background_down: 'Imgs/slapButtonPressed.png'

    AnchorLayout:

        anchor_x: 'right'
        anchor_y: 'bottom'

        Button:
            text: "Back"
            # color: 1,1,1,0.5
            # background_color: 0.1, 0.1, 0.1, 1
            size_hint: [None, None]
            size: [200, 100]
            on_release: root.stopMusic()
            on_release: root.manager.current = 'screen1'


    PlayButton:
        size: self.size
        id: playbutton



